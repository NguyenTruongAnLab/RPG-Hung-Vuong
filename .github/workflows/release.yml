name: 🚀 Create GitHub Release

on:
  workflow_dispatch:
    inputs:
      version:
        description: 'Release version (e.g., 1.0.0)'
        required: true
        type: string

permissions:
  contents: write

jobs:
  create-release:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create Release Template
        run: |
          cat > release-body.md << 'EOF'
          # RPG Hùng Vương - Release ${{ github.event.inputs.version }}
          
          ## 🎮 Download
          
          ### 🌐 Web Version (Auto-Updated)
          **Play Online:** https://nguyentruonganlab.github.io/RPG-Hung-Vuong/
          - No installation needed
          - Works on any browser
          - Always latest version
          
          ### 🪟 Windows Version
          **Coming Soon...** 
          
          ⏳ Windows .exe files will be uploaded manually after local build completes.
          
          📋 **To Upload Windows Build** (Developer):
          ```bash
          npm run build:windows
          gh release upload v${{ github.event.inputs.version }} release/*.exe
          ```
          
          ## 🚀 Installation
          
          **Web:** Click link above → Play immediately
          
          **Windows:** Download .exe → Run → Play
          
          ## 📋 Requirements
          - Any modern web browser (for web version)
          - Windows 7+ (for Windows version)
          
          ## 🔒 Security Features
          - ✅ Encrypted asset bundles (Windows only)
          - ✅ No source maps or debug files
          - ✅ Code minified and optimized
          - ✅ All tests passed before release
          
          ## ❓ Support
          - Issues: https://github.com/NguyenTruongAnLab/RPG-Hung-Vuong/issues
          - Repository: https://github.com/NguyenTruongAnLab/RPG-Hung-Vuong
          EOF
          
          cat release-body.md

      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v${{ github.event.inputs.version }}
          name: Release ${{ github.event.inputs.version }}
          body_path: release-body.md
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Release Instructions
        run: |
          echo "✅ Release v${{ github.event.inputs.version }} created!"
          echo ""
          echo "📋 NEXT STEPS:"
          echo "=================================================="
          echo "1. On your local machine, build Windows version:"
          echo "   npm run build:windows"
          echo ""
          echo "2. Upload .exe files to this release:"
          echo "   gh release upload v${{ github.event.inputs.version }} release/*.exe"
          echo ""
          echo "   OR manually upload via:"
          echo "   https://github.com/NguyenTruongAnLab/RPG-Hung-Vuong/releases/edit/v${{ github.event.inputs.version }}"
          echo ""
          echo "3. Edit release notes if needed"
          echo "4. Share with users!"
          echo "=================================================="
